{"ast":null,"code":"import _slicedToArray from\"C:/Users/amite/Dropbox/My PC (DESKTOP-BBFSJRK)/Desktop/Amitex Food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"C:/Users/amite/Dropbox/My PC (DESKTOP-BBFSJRK)/Desktop/Amitex Food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/amite/Dropbox/My PC (DESKTOP-BBFSJRK)/Desktop/Amitex Food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useReducer}from'react';import CartContext from'./cart-context';import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var CartReducer=function CartReducer(state,actions){if(actions.type=='ADD'){var updatedTotalAmount=state.totalAmount+actions.item.price*actions.item.amount;var existingCartIndex=state.items.findIndex(function(item){return item.id===actions.item.id;});var existingCartItem=state.items[existingCartIndex];var updatedItems;if(existingCartItem){var updatedItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+actions.item.amount});updatedItems=_toConsumableArray(state.items);updatedItems[existingCartIndex]=updatedItem;}else{updatedItems=state.items.concat(actions.item);}return{items:updatedItems,totalAmount:updatedTotalAmount};}if(actions.type==='REMOVE'){var _existingCartIndex=state.items.findIndex(function(item){return item.id===actions.id;});var existingItem=state.items[_existingCartIndex];var updatedAmount=state.totalAmount-existingItem.price;var _updatedItems;if(existingItem.amount==1){_updatedItems=state.items.filter(function(item){return item.id!=actions.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},existingItem),{},{amount:existingItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[_existingCartIndex]=_updatedItem;}return{items:_updatedItems,totalAmount:updatedAmount};}if(actions.type==='CLEAR'){return defaultCartState;}return defaultCartState;};var CartProvider=function CartProvider(props){var _useReducer=useReducer(CartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartState=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchCartState({type:'ADD',item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCartState({type:'REMOVE',id:id});};var clearCartHandler=function clearCartHandler(){dispatchCartState({type:'CLEAR'});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler,clearCart:clearCartHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"sources":["C:/Users/amite/Dropbox/My PC (DESKTOP-BBFSJRK)/Desktop/Amitex Food/src/store/CartProvider.js"],"names":["useReducer","CartContext","defaultCartState","items","totalAmount","CartReducer","state","actions","type","updatedTotalAmount","item","price","amount","existingCartIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","concat","existingItem","updatedAmount","filter","CartProvider","props","cartState","dispatchCartState","addItemToCartHandler","removeItemFromCartHandler","clearCartHandler","cartContext","addItem","removeItem","clearCart","children"],"mappings":"kjBAAA,OAAQA,UAAR,KAAyB,OAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,C,2CAEA,GAAMC,CAAAA,gBAAgB,CAAC,CACnBC,KAAK,CAAC,EADa,CAEnBC,WAAW,CAAC,CAFO,CAAvB,CAKA,GAAMC,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACC,KAAD,CAAOC,OAAP,CAAiB,CAC/B,GAAGA,OAAO,CAACC,IAAR,EAAc,KAAjB,CAAuB,CAEnB,GAAMC,CAAAA,kBAAkB,CAACH,KAAK,CAACF,WAAN,CAAkBG,OAAO,CAACG,IAAR,CAAaC,KAAb,CAAmBJ,OAAO,CAACG,IAAR,CAAaE,MAA3E,CACA,GAAMC,CAAAA,iBAAiB,CAACP,KAAK,CAACH,KAAN,CAAYW,SAAZ,CAAsB,SAAAJ,IAAI,QAAEA,CAAAA,IAAI,CAACK,EAAL,GAAUR,OAAO,CAACG,IAAR,CAAaK,EAAzB,EAA1B,CAAxB,CACA,GAAMC,CAAAA,gBAAgB,CAACV,KAAK,CAACH,KAAN,CAAYU,iBAAZ,CAAvB,CAEA,GAAII,CAAAA,YAAJ,CACA,GAAGD,gBAAH,CAAoB,CAChB,GAAME,CAAAA,WAAW,gCACVF,gBADU,MAEbJ,MAAM,CAACI,gBAAgB,CAACJ,MAAjB,CAAwBL,OAAO,CAACG,IAAR,CAAaE,MAF/B,EAAjB,CAIAK,YAAY,oBAAKX,KAAK,CAACH,KAAX,CAAZ,CACAc,YAAY,CAACJ,iBAAD,CAAZ,CAAgCK,WAAhC,CACH,CAPD,IAOK,CACDD,YAAY,CAACX,KAAK,CAACH,KAAN,CAAYgB,MAAZ,CAAmBZ,OAAO,CAACG,IAA3B,CAAb,CACH,CACD,MAAO,CACHP,KAAK,CAACc,YADH,CAEHb,WAAW,CAACK,kBAFT,CAAP,CAIH,CACD,GAAGF,OAAO,CAACC,IAAR,GAAe,QAAlB,CAA2B,CACvB,GAAMK,CAAAA,kBAAiB,CAACP,KAAK,CAACH,KAAN,CAAYW,SAAZ,CAAsB,SAAAJ,IAAI,QAAEA,CAAAA,IAAI,CAACK,EAAL,GAAUR,OAAO,CAACQ,EAApB,EAA1B,CAAxB,CACA,GAAMK,CAAAA,YAAY,CAACd,KAAK,CAACH,KAAN,CAAYU,kBAAZ,CAAnB,CACA,GAAMQ,CAAAA,aAAa,CAACf,KAAK,CAACF,WAAN,CAAkBgB,YAAY,CAACT,KAAnD,CACA,GAAIM,CAAAA,aAAJ,CACA,GAAGG,YAAY,CAACR,MAAb,EAAqB,CAAxB,CAA0B,CACtBK,aAAY,CAACX,KAAK,CAACH,KAAN,CAAYmB,MAAZ,CAAmB,SAAAZ,IAAI,QAAEA,CAAAA,IAAI,CAACK,EAAL,EAASR,OAAO,CAACQ,EAAnB,EAAvB,CAAb,CACH,CAFD,IAEK,CACD,GAAMG,CAAAA,YAAW,gCAAKE,YAAL,MAAkBR,MAAM,CAACQ,YAAY,CAACR,MAAb,CAAoB,CAA7C,EAAjB,CACAK,aAAY,oBAAKX,KAAK,CAACH,KAAX,CAAZ,CACAc,aAAY,CAACJ,kBAAD,CAAZ,CAAgCK,YAAhC,CACH,CACD,MAAO,CACHf,KAAK,CAACc,aADH,CAEHb,WAAW,CAACiB,aAFT,CAAP,CAIH,CACD,GAAGd,OAAO,CAACC,IAAR,GAAe,OAAlB,CAA0B,CACtB,MAAON,CAAAA,gBAAP,CACH,CACD,MAAOA,CAAAA,gBAAP,CACH,CA5CD,CA8CA,GAAMqB,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,CAAAC,KAAK,CAAE,iBAEcxB,UAAU,CAACK,WAAD,CAAaH,gBAAb,CAFxB,4CAEfuB,SAFe,iBAELC,iBAFK,iBAItB,GAAMC,CAAAA,oBAAoB,CAAC,QAArBA,CAAAA,oBAAqB,CAACjB,IAAD,CAAQ,CAC/BgB,iBAAiB,CAAC,CAAClB,IAAI,CAAC,KAAN,CAAYE,IAAI,CAACA,IAAjB,CAAD,CAAjB,CACH,CAFD,CAGA,GAAMkB,CAAAA,yBAAyB,CAAC,QAA1BA,CAAAA,yBAA0B,CAACb,EAAD,CAAM,CAClCW,iBAAiB,CAAC,CAAClB,IAAI,CAAC,QAAN,CAAeO,EAAE,CAACA,EAAlB,CAAD,CAAjB,CACH,CAFD,CAIA,GAAMc,CAAAA,gBAAgB,CAAC,QAAjBA,CAAAA,gBAAiB,EAAI,CACvBH,iBAAiB,CAAC,CAAClB,IAAI,CAAC,OAAN,CAAD,CAAjB,CACH,CAFD,CAIA,GAAMsB,CAAAA,WAAW,CAAC,CACd3B,KAAK,CAACsB,SAAS,CAACtB,KADF,CAEdC,WAAW,CAACqB,SAAS,CAACrB,WAFR,CAGd2B,OAAO,CAACJ,oBAHM,CAIdK,UAAU,CAACJ,yBAJG,CAKdK,SAAS,CAACJ,gBALI,CAAlB,CASA,mBAAO,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEC,WAA7B,UACFN,KAAK,CAACU,QADJ,EAAP,CAGH,CA3BD,CA4BA,cAAeX,CAAAA,YAAf","sourcesContent":["import {useReducer} from 'react';\r\nimport CartContext from './cart-context';\r\n\r\nconst defaultCartState={\r\n    items:[],\r\n    totalAmount:0\r\n}\r\n\r\nconst CartReducer=(state,actions)=>{\r\n    if(actions.type=='ADD'){\r\n        \r\n        const updatedTotalAmount=state.totalAmount+actions.item.price*actions.item.amount;\r\n        const existingCartIndex=state.items.findIndex(item=>item.id===actions.item.id);\r\n        const existingCartItem=state.items[existingCartIndex];\r\n\r\n        let updatedItems;\r\n        if(existingCartItem){\r\n            const updatedItem={\r\n                ...existingCartItem,\r\n                amount:existingCartItem.amount+actions.item.amount\r\n            };\r\n            updatedItems=[...state.items];\r\n            updatedItems[existingCartIndex]=updatedItem;\r\n        }else{\r\n            updatedItems=state.items.concat(actions.item);\r\n        }\r\n        return {\r\n            items:updatedItems,\r\n            totalAmount:updatedTotalAmount\r\n        }\r\n    }\r\n    if(actions.type==='REMOVE'){\r\n        const existingCartIndex=state.items.findIndex(item=>item.id===actions.id);\r\n        const existingItem=state.items[existingCartIndex];\r\n        const updatedAmount=state.totalAmount-existingItem.price;\r\n        let updatedItems;\r\n        if(existingItem.amount==1){\r\n            updatedItems=state.items.filter(item=>item.id!=actions.id);\r\n        }else{\r\n            const updatedItem={...existingItem,amount:existingItem.amount-1};\r\n            updatedItems=[...state.items];\r\n            updatedItems[existingCartIndex]=updatedItem;\r\n        }\r\n        return {\r\n            items:updatedItems,\r\n            totalAmount:updatedAmount\r\n        }\r\n    }\r\n    if(actions.type==='CLEAR'){\r\n        return defaultCartState;\r\n    }\r\n    return defaultCartState;\r\n}\r\n\r\nconst CartProvider=props=>{\r\n\r\n    const [cartState,dispatchCartState]=useReducer(CartReducer,defaultCartState);\r\n\r\n    const addItemToCartHandler=(item)=>{\r\n        dispatchCartState({type:'ADD',item:item})\r\n    }\r\n    const removeItemFromCartHandler=(id)=>{\r\n        dispatchCartState({type:'REMOVE',id:id})\r\n    }\r\n    \r\n    const clearCartHandler=()=>{\r\n        dispatchCartState({type:'CLEAR'});\r\n    }\r\n\r\n    const cartContext={\r\n        items:cartState.items,\r\n        totalAmount:cartState.totalAmount,\r\n        addItem:addItemToCartHandler,\r\n        removeItem:removeItemFromCartHandler,\r\n        clearCart:clearCartHandler\r\n\r\n    }\r\n\r\n    return <CartContext.Provider value={cartContext}>\r\n        {props.children}\r\n    </CartContext.Provider>\r\n}\r\nexport default CartProvider;"]},"metadata":{},"sourceType":"module"}